<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Persistent Todo List</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 2em;
        }
        .todo-item {
            display: flex;
            align-items: center;
            margin-bottom: 0.5em;
            padding: 0.5em;
            border: 1px solid #ccc;
            border-radius: 4px;
            background: #f9f9f9;
        }
        .todo-label {
            flex: 1;
            margin-right: 1em;
            font-weight: bold;
        }
        .delete-btn {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 0.3em 0.8em;
            border-radius: 3px;
            cursor: pointer;
        }
        .delete-btn:hover {
            background: #c0392b;
        }
    </style>
</head>
<body>
    <h2>Todo List</h2>
    <input type="text" id="todoInput" placeholder="Enter item..." />
    <button id="addBtn">Add</button>
    <div id="todoContainer"></div>

    <script>
        // Utility: Load todos from localStorage
        function loadTodos() {
            const todos = localStorage.getItem('todos');
            return todos ? JSON.parse(todos) : [];
        }

        // Utility: Save todos to localStorage
        function saveTodos(todos) {
            localStorage.setItem('todos', JSON.stringify(todos));
        }

        // Utility: Render todos to DOM
        function renderTodos() {
            const todos = loadTodos();
            const container = document.getElementById('todoContainer');
            container.innerHTML = '';
            todos.forEach((todo, idx) => {
                const div = document.createElement('div');
                div.className = 'todo-item';
                div.setAttribute('data-idx', idx);

                const label = document.createElement('label');
                label.className = 'todo-label';
                label.textContent = todo;

                const delBtn = document.createElement('button');
                delBtn.className = 'delete-btn';
                delBtn.textContent = 'Delete';
                delBtn.onclick = function() {
                    deleteTodo(idx);
                };

                div.appendChild(label);
                div.appendChild(delBtn);
                container.appendChild(div);
            });
        }

        // Add new todo
        function addTodo() {
            const input = document.getElementById('todoInput');
            const value = input.value.trim();
            if (!value) return;
            const todos = loadTodos();
            todos.push(value);
            saveTodos(todos);
            input.value = '';
            renderTodos();
        }

        // Delete todo by index
        function deleteTodo(idx) {
            const todos = loadTodos();
            todos.splice(idx, 1);
            saveTodos(todos);
            renderTodos();
        }

        // Event listeners
        document.getElementById('addBtn').addEventListener('click', addTodo);
        document.getElementById('todoInput').addEventListener('keyup', function(e) {
            if (e.key === 'Enter') addTodo();
        });

        // Render on load
        window.onload = renderTodos;
    </script>
</body>
</html>
